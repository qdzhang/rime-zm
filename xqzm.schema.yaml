# Rime schema settings
# encoding: utf-8
# generated at 2021-08-16 10:06:20.107625 by å°æ³‰
# vim: et:ts=2:sw=2:sts=2:fenc=utf8:ft=yaml
#
# [Description]
#   å°æ³‰å…¨éƒ‘ï¼Œè¶…å¤§å­—é›†ï¼Œè¶…å¤§è¯åº“ï¼Œè¶…å¤šç¬¦å·è¡¨æƒ…ï¼Œå¸¦ä¹ä¸‡å¤šå•å­—å£°è°ƒæ‹¼éŸ³ï¼Œä¸ƒä¸‡å¤šè¯ç»„æ‹¼éŸ³ï¼Œå¸¦æœ‰ cjk å­—é›†æ‹†åˆ†
---

schema:
  schema_id: xqzm
  name: å°æ³‰éƒ‘ç 
  version: "0.6.2"
  author:
    - "xq / é£å…¥æ¾"
  description: |
    å°æ³‰å…¨éƒ‘ï¼Œè¶…å¤§å­—é›†ï¼Œè¶…å¤§è¯åº“ï¼Œè¶…å¤šç¬¦å·è¡¨æƒ…ï¼Œå¸¦ä¹ä¸‡å¤šå•å­—å£°è°ƒæ‹¼éŸ³ï¼Œä¸ƒä¸‡å¤šè¯ç»„æ‹¼éŸ³ï¼Œå¸¦æœ‰ cjk å­—é›†æ‹†åˆ†
    è¾“å…¥ ` è¿›å…¥æ‹¼éŸ³åæŸ¥ï¼Œä¾èµ– pinyin_xq æ–¹æ¡ˆ
  dependencies:
    - pinyin_xq

switches:
  - name: ascii_mode
    reset: 0
    states: ["ä¸­æ–‡", "è¥¿æ–‡"]
  - name: full_shape
    states: ["åŠè§’", "å…¨è§’"]
  - name: gbk
    states: [UTF8, GBK]
  - name: s2t
    states: [å¸¸è§„, ç¹ä½“]
    reset: 0
  - name: emoji_suggestion
    states: [ã€‡, ğŸ˜Š]
    reset: 1
  - name: pinyin_tip
    states: ["æ‹¼", "pÄ«n"]
    reset: 0
  - name: xqzm_spelling
    states: ["æ‹†", "æ‰Œæ–¥"]
    reset: 0

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    # - affix_segmentor@jzzc
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator
    - punct_translator
    - table_translator
    # - table_translator@fixed
    # - table_translator@jzzc
    - reverse_lookup_translator
    - history_translator@history
    - lua_translator@datetime_translator
  filters:
    - simplifier
    - charset_filter@gb2312
    - charset_filter@gbk
    - charset_filter@big5
    - simplifier@pinyin_tip
    - simplifier@emoji_suggestion
    - reverse_lookup_filter@zhengma_lookup
    - simplifier@xqzm_spelling
    - uniquifier

## https://github.com/LEOYoon-Tsaw/Rime_collections/blob/master/Rime_description.md
speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba
  delimiter: " '"
  max_code_length: 4
  auto_select: false    # é¡¶å­—ä¸Šå±
  auto_clear: max_length
  auto_select_unique_candidate: true

# abc_segmentor:
#   extra_tags:
#     - reverse_lookup

translator:
  dictionary: &dict xqzm
  initial_quality: 1000
  enable_charset_filter: false
  enable_sentence: false
  enable_encoder: false
  enable_user_dict: false
  encode_commit_history: false
  max_phrase_length: 2
  enable_completion: true


# fixed:
#   db_class: tabledb
#   __include: /translator
#   initial_quality: 100
#   enable_encoder: false
#   enable_user_dict: false


simplifier:
  opencc_config: s2hk.json
  option_name: s2t
  tags: [abc]
  tips: all

emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all

pinyin_tip:
  opencc_config: py.json
  option_name: pinyin_tip
  show_in_comment: true
  # overwrite_comment: true
  comment_format:
    - "xform@'@/@"
  tags: [abc]
  tips: all

xqzm_spelling:
  opencc_config: xqzm_spelling.json
  option_name: xqzm_spelling
  show_in_comment: true
  comment_format:
    - "xform@_@ @"
  tags:
    - abc
    - reverse_lookup
  tips: char

big5:
  option_name: big5
  charset: big5

gbk:
  option_name: gbk
  charset: gbk

gb2312:
  option_name: gb2312
  charset: gb2312

reverse_lookup:
  closing_tips: "ã€”éƒ‘ç ã€•"
  dictionary: pinyin_xq
  prefix: "`"
  # suffix: ";"
  tips: ã€”æ‹¼éŸ³åæŸ¥ã€•
  initial_quality: 1
  preedit_format:
    - "xform/([nl])v/$1Ã¼/"
    - "xform/([nl])ue/$1Ã¼e/"
    - "xform/([jqxy])v/$1u/"

zhengma_lookup:
  tags: [abc, pinyin]
  dictionary: *dict
  overwrite_comment: false

history:
  input: hl
  size: 1
  initial_quality: 1

key_binder:
  import_preset: default
  bindings:
    - {when: has_menu, accept: semicolon, send: 2}
    - {when: has_menu, accept: apostrophe, send: 3}
    - {when: has_menu, accept: period, send: period}
    - {when: always, accept: Control+Shift+E, toggle: emoji_suggestion}
    - {when: always, accept: Control+Shift+F, toggle: s2t}
    - {when: always, accept: Control+Shift+P, toggle: pinyin_tip}
    - {when: always, accept: Control+Shift+S, toggle: xqzm_spelling}

editor:
  bindings:
    "Control+Return": commit_comment

punctuator:
  import_preset: symbols
  half_shape:
    '#' : '#'
    '=' : '='
    '\\': 'ã€'

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "^`[a-z]*$"
    punct: "^/([a-z]+|[0-9]0?)$"
